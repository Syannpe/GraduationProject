<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        strong {
            position: fixed;
            top: 10px;
            right: 40px;
            font-size: 1em;
            color: red;
            z-index: 1;
        }
    </style>
</head>
<body>
<strong></strong>
绘制1e6个方块的速度
<script type="module">
    import {Mano} from "../Mano.js";

    document.addEventListener("DOMContentLoaded", function () {
        let p = performance;
        console.log("start", p.now());

        const mano = new Mano();
        const canvas = new Mano.Canvas({
            height: 400,
            width: 800,
            enableFPS: true
        });
        const graphic = new Mano.Graphic();
        mano.appendChild(canvas);
        mano.appendChild(graphic);
        this.body.appendChild(mano);

        function renderer() {
            document.querySelector("strong").innerText = canvas.getFPS() + "";
            requestAnimationFrame(renderer)
        }

        renderer();

        for (let i = 0; i < 100; i++) {
            const rect = new Mano.Graphic.Rect(100, 100, 100, 100);

            const effect = new Mano.GraphicKeyframeEffect(rect, [
                {boxTransform: rect.boxTransform},
                {boxTransform: rect.boxTransform.translate(1000, 0)},
            ], {
                duration: 5000,
            });

            const animation = new Mano.Animation(effect, document.timeline);
            animation.addEventListener("finish", function () {
                console.log("finish"+i)
            });
            rect.animation = animation
            graphic.appendChild(rect);
        }

        //动画帧数和图元个数的函数大约为：y-100=k(x-45)  k=(100-38)/(45-100)=-1.12727
    });
</script>
</body>
</html>